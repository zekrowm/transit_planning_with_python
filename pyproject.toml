# pyproject.toml

# ================================================================
# PYTHON LINTING, FORMATTING & TYPE CHECKING
# ================================================================
# ----------------------------------------------------------------
# ruff
# ----------------------------------------------------------------
[tool.ruff]
target-version = "py312"
line-length    = 100

[tool.ruff.lint]
# I  → isort-compatible import ordering
# F  → Pyflakes-equivalent static analysis
# D  → pydocstyle (Google-style enforced below)
# ANN = flake8-annotations
# TC = flake8-type-checking
select   = ["I", "F", "D", "ANN", "TCH", "B", "E", "W"]
fixable  = ["F401", "D", "I"]
ignore   = ["ANN401", "TC002", "TC003"]

[tool.ruff.lint.per-file-ignores]
# Keep tests lean: skip module docstrings and param annotations for fixtures.
"tests/**/*" = ["D100", "D101", "D102", "D103", "D104", "D105", "D106", "D107", "ANN001"]

[tool.ruff.lint.pydocstyle]
convention = "google"

# ----------------------------------------------------------------
# ty
# ----------------------------------------------------------------
[tool.ty]

[tool.ty.src]
exclude = ["**/*arcpy*"]

[tool.ty.environment]
python-version = "3.12"

[tool.ty.rules]
unsupported-operator = "error"
invalid-return-type = "error"
unresolved-import = "warn"
invalid-assignment = "error"
invalid-argument-type = "error"
non-subscriptable = "error"
not-iterable = "error"
no-matching-overload = "error"
invalid-parameter-default = "error"
possibly-missing-attribute = "error"
redundant-cast = "error"
unresolved-reference = "error"
unresolved-attribute = "error"
unresolved-global = "error"

# ----------------------------------------------------------------
# mypy
# ----------------------------------------------------------------
[tool.mypy]
files = ["scripts/ridership_tools"]
python_version = "3.12"
ignore_missing_imports = true
warn_unused_ignores = true
show_error_codes = true

# ================================================================
# COMMIT MESSAGE LINTING
# ================================================================
